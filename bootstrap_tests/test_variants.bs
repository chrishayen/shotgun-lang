// Variant tests

Option :: variant {
    Some { value int }
    None
}

Result :: variant {
    Ok { value str }
    Err { message str }
}

fn is_some(Option opt) bool {
    return opt is Some
}

fn main() {
    t := new_test()

    // Create variants
    Option some_val = Option.Some { value: 42 }
    Option none_val = Option.None

    // Boolean checks using is
    t.assert_true(is_some(some_val))
    t.assert_false(is_some(none_val))

    // Result variant
    Result ok = Result.Ok { value: "success" }
    Result err = Result.Err { message: "failed" }

    str ok_tag = match ok using Result {
        Ok -> { "ok" }
        Err -> { "err" }
    }
    t.assert_eq_str("ok", ok_tag)

    str err_tag = match err using Result {
        Ok -> { "ok" }
        Err -> { "err" }
    }
    t.assert_eq_str("err", err_tag)

    // Wildcard matching
    str result = match some_val using Option {
        Some -> { "some" }
        _ -> { "other" }
    }
    t.assert_eq_str("some", result)

    t.summary()
}
