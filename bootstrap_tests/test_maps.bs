// Map tests

fn main() {
    t := new_test()

    // Create empty map
    Map<str, int> counts = Map<str, int>{}
    t.assert_eq_int(0, counts.len())

    // Set and get values
    counts["foo"] = 1
    counts["bar"] = 2
    counts["baz"] = 3
    t.assert_eq_int(3, counts.len())
    t.assert_eq_int(1, counts["foo"])
    t.assert_eq_int(2, counts["bar"])
    t.assert_eq_int(3, counts["baz"])

    // has() method
    t.assert_true(counts.has("foo"))
    t.assert_true(counts.has("bar"))
    t.assert_false(counts.has("missing"))

    // Update existing key
    counts["foo"] = 100
    t.assert_eq_int(100, counts["foo"])
    t.assert_eq_int(3, counts.len())

    // delete() method
    counts.delete("bar")
    t.assert_eq_int(2, counts.len())
    t.assert_false(counts.has("bar"))

    // Map with string values
    Map<str, str> names = Map<str, str>{}
    names["a"] = "Alice"
    names["b"] = "Bob"
    t.assert_eq_str("Alice", names["a"])
    t.assert_eq_str("Bob", names["b"])

    t.summary()
}
