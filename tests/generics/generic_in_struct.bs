// Test: Generic type as field in non-generic struct

Option<T> :: variant {
    Some { value T }
    None
}

Person :: struct {
    name str
    age Option<int>
}

fn main {
    Person p1 = Person {
        name: "Alice",
        age: Option<int>.Some { value: 30 }
    }

    Person p2 = Person {
        name: "Unknown",
        age: Option<int>.None
    }

    int age1 = match p1.age using Option<int> {
        Some { value: v } -> v,
        None -> 0
    }

    int age2 = match p2.age using Option<int> {
        Some { value: v } -> v,
        None -> 0
    }

    if p1.name == "Alice" and age1 == 30 and p2.name == "Unknown" and age2 == 0 {
        print("generic in struct test passed")
    } else {
        print("FAIL: values incorrect")
    }
}
