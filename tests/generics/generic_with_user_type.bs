// Test: Generic type instantiated with user-defined type

Point :: struct {
    x int
    y int
}

Box<T> :: struct {
    value T
}

Option<T> :: variant {
    Some { value T }
    None
}

fn main {
    Point p = Point { x: 10, y: 20 }

    Box<Point> boxed_point = Box<Point> { value: p }
    Point extracted = boxed_point.value

    Option<Point> maybe_point = Option<Point>.Some { value: p }

    Point matched = match maybe_point using Option<Point> {
        Some { value: v } -> v,
        None -> Point { x: 0, y: 0 }
    }

    if extracted.x == 10 and extracted.y == 20 and matched.x == 10 and matched.y == 20 {
        print("generic with user type test passed")
    } else {
        print("FAIL: point values incorrect")
    }
}
